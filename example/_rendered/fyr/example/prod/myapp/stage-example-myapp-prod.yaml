apiVersion: kargo.akuity.io/v1alpha1
kind: Stage
metadata:
  annotations:
    kargo.akuity.io/color: red
  labels:
    stage: prod
  name: example-myapp-prod
  namespace: fyr-kargo
spec:
  promotionTemplate:
    spec:
      steps:
        - task:
            kind: ClusterPromotionTask
            name: push-image
  requestedFreight:
    - origin:
        kind: Warehouse
        name: example-myapp
      sources:
        direct: false
        stages:
          - example-myapp-test
  vars:
    - name: path
      value: _kargo/fyr/prod/example/myapp
    - name: image
      value: ghcr.io/kystverket/example/myapp
    - name: version
      value: ${{imageFrom(vars.image).Tag}}
